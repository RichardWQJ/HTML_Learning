<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
</head>

<body>
    <div class="container">
        <strong><span style="font-weight: bold;font-size: 25px;">登 录</span></strong>
        <form action="">
            <input type="text" id="user" name="name" font color="red" placeholder="Username">
            <input type="password" id="password" name="password" placeholder="Password">
            <button type="submit" id="login-button" onclick=login_judge()> 登 录 </button>
        </form>
    </div>
    <script type="text/javascript">
        $("#login-button").submit(function () {
            var email = $("#user").val();//这个只能是document对象
            var pwd = $("#password").val();
            if (email == "") {
                changeDLGContent("邮箱不能为空!");
                openYesOrNoDLG();
                return false;
            } else if (pwd == "") {
                changeDLGContent("请输入密码");
                openYesOrNoDLG();
                return false;
            } else if (email != "" && pwd != "") {
                getLogin(email, pwd);
                return false;
            }
        });

        //ajax登录验证
        function getLogin(email, pwd) {
            $.ajax({
                type: "GET",//请求类型
                url: path + "/static/login",//请求的url
                data: { name: email, pwd: pwd },//请求参数
                dataType: "json",//ajax接口（请求url）返回的数据类型
                async: false, //true异步，false同步
                success: function (data) {//data：返回数据（json对象）
                    if (data == 1) {
                        window.location.href = path + "tomodify/" + obj.attr("billid");
                    } else if (data == 2) {
                        changeDLGContent("该账户为冻结状态，不能登录!");
                        openYesOrNoDLG();
                    } else {
                        changeDLGContent("用户或密码错误登录失败!");
                        openYesOrNoDLG();
                    }
                },
                error: function (data) {//当访问时候，404，500 等非200的错误状态码
                    alert("加载失败！");
                }
            });
        }
    </script>
</body>

</html>